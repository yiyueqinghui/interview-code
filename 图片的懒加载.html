<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
	</body>
	<script>
		function isVisible(el) {
			const position = el.getBoundingClientRect()
			const windowHeight = window.innerHeight;
			// 顶部边缘可见
			const topVisible = position.top > 0 && position.top < windowHeight;
			// 底部边缘可见
			const bottomVisible = position.bottom > 0 && position.bottom < windowHeight
			// 只要顶部/底部可见，图层显示
			return topVisible || bottomVisible;
		}

		function imageLazyLoad(images) {
			for(let img of images) {
				const realSrc = img.getAttribute('data-src');
				if(!realSrc) continue
				if(isVisible(img)) {
					img.src = realSrc
				}
			}
		}

		// 测试
		const images = document.querySelectorAll('img')
		window.addEventListener('load', function() {
			imageLazyLoad(images)
		))
		window.addEventListener('scroll', function() {
			imageLazyLoad(images)
		))
	</script>

</html>